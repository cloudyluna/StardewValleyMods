\usepackage[utf8]{inputenc}
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{xstring}
\usepackage{microtype}
\usepackage{etoolbox}

\author{Cloudyluna}
\makeatletter

\newcommand{\makeruler}{\noindent\rule{\textwidth}{1pt}}

\newcommand{\subProjectVersion}[1]{
	\subsection{Version}
	#1
}

% 1 is title. 2 is longer description. %
\newcommand{\subprojecttitle}[2]{
	\section{#1}
	\makeruler
	#2
}

% 1 is list of \items %
\newcommand{\subprojectfeatures}[2]{
	\subsection{Features}
	\begin{itemize}
		#2
	\end{itemize}

	\subProjectVersion{#1}
}

\newcommand{\subProjectHardDependencies}[1]{
	\subsection{Requirements}
	\begin{itemize}
		\item Stardew Valley 1.6 (preferably, version 1.6.8)
		\item \href{https://www.nexusmods.com/stardewvalley/mods/2400}{SMAPI} (minimum v4.0.0 or higher)
		      #1
	\end{itemize}
}

\newcommand{\subProjectDependencies}[1]{
	\subProjectHardDependencies{
		\item \href{https://www.nexusmods.com/stardewvalley/mods/5098}{Generic Mod Config Menu} - \textit{Optional} but \emph{highly recommended}.
		#1
	}
}

\newcommand{\modUrl}[2]{
	\texttt{\href{https://www.nexusmods.com/stardewvalley/mods/#1?tab=#2}{#2}}
}

% #1=mod id
% #2=multiplayer compatibility
% #3=incompatibility with other mods
\newcommand{\subProjectCompatibility}[3]{
	\subsection{Compatibility}
	If you found this mod behaving weirdly or being incompatible with other mods, please report it in the \modUrl{#1}{bugs} or \modUrl{#1}{posts} page
	so I can update this documentation with that information and to let other users know about such potential issues in the future.
	\newline
	\newline

	\begin{quote}
		This mod should work with most other mods unless specified otherwise below.
	\end{quote}

	\subsubsection{Compatible with multiplayer?}
	#2

	\subsubsection{Incompatible with}
	\begin{itemize}
		#3
	\end{itemize}
}

\newcommand{\subProjectKnownIssues}[1]{
	\subsection{Known issues}
	\begin{itemize}
		#1
	\end{itemize}
}

\newcommand{\subProjectCompatIssues}[4]{
	\subProjectCompatibility{#1}{#2}{#3}

	\subProjectKnownIssues{#4}

	\subProjectChangelog{}
}

% 1: Project name.
% 2:
\newcommand{\subprojectInstallInstructions}[1]{
	\subsection{For users}
	\subsubsection{Installing #1}

	\begin{enumerate}
		\item This mod requires SMAPI and other dependencies listed above, so please, install those first.
		\item Unzip the files into the \texttt{\textit{Stardew Valley/Mods/#1}} game folder.
		\item Make sure the \texttt{\textit{#1.dll}} and \texttt{\textit{manifest.json}} files are inside \texttt{\textit{#1}} folder, not in \texttt{\textit{Mods}} folder.
		\item Launch the game through SMAPI launcher.
	\end{enumerate}
}

% 1: Project name.
% 2: Extra building instructions.
%
\newcommand{\subprojectBuildInstructions}[1]{
	\subsection{For developers}
	\subsubsection{Building #1}

	\begin{quote}
		Attention: Make sure you already have set up \$\textit{GAME\_PATH}
		pointing to your Stardew Valley game folder first.
	\end{quote}

	If you cloned this project from the Github and have
	\texttt{nix} installed, run \texttt{nix develop} to load the
	development environment. Then run \texttt{make} or \texttt{dotnet build}
	to build the project.
}

\newcommand{\subProjectChangelog}{
	\subsection{What changed?}

	See \href{CHANGELOG.md}{CHANGELOG.md} file for details.
}

\newcommand{\subprojectrepos}[1]{
	\subsection{Source code}

	\begin{itemize}
		\item \href{https://github.com/cloudyluna/StardewValleyMods/tree/main/#1}{Github}
	\end{itemize}
}
% takes the nexusmod id page %
\newcommand{\subprojectmodpages}[1]{
	\subsection{Mod page}

	\begin{itemize}
		\item \href{https://www.nexusmods.com/stardewvalley/mods/#1}{Nexusmods}
	\end{itemize}
}

\newcommand{\thanksto}{
	\subsection{Thanks to}
	\begin{itemize}
		\item \href{https://github.com/Pathoschild/SMAPI}{SMAPI dev and contributors} for making Stardew Valley modding accessible.

		\item \href{https://www.nexusmods.com/stardewvalley/mods/5098}{Generic Config Menu dev and contributors} for making mod configuration through GUI, simple and easy.
	\end{itemize}
}

\newcommand{\subProjectAcknowledge}[2]{
	\thanksto
	\subprojectmodpages{#1}
	\subprojectrepos{#2}
}

\newcommand{\myCopyright}{
	\begin{quote}
		Copyright (c) 2024 Cloudyluna
	\end{quote}
}

\newcommand{\licenseNotice}{
	\subsection{License}
	\myCopyright

	This project is licensed under the AGPL-3.0-or-later license -
	see the \texttt{LICENSE} file for details.
}

\newcommand{\subProjectLicenseNotice}{
	\licenseNotice

	\begin{itemize}
		\item  The bundled FSharp.Core is licensed under the MIT license.
		      See \texttt{sublicenses/FSharp.MIT} file for details.
	\end{itemize}
}
